class AnimationController{constructor(){this.observers = [];this.prefersReducedMotion = window.matchMedia('(prefers-reduced-motion:reduce)').matches;this.animatedElements = new Set();this.skillBarsAnimated = false;}init(){if(this.prefersReducedMotion){console.log('Reduced motion preference detected - animations disabled');this.disableAnimations();return;}this.setupScrollAnimations();this.setupSkillBarAnimations();this.setupTimelineAnimations();this.setupHoverEffects();this.setupScrollProgress();console.log('Animation Controller initialized');}disableAnimations(){const animatedElements = document.querySelectorAll('[class*="scroll-reveal"],[class*="fade-in"],[class*="slide-"]');animatedElements.forEach(element =>{element.style.opacity = '1';element.style.transform = 'none';element.classList.add('revealed');});}setupScrollAnimations(){const observerOptions ={threshold:0.1,rootMargin:'0px 0px -50px 0px'};const observer = new IntersectionObserver((entries)=>{entries.forEach(entry =>{if(entry.isIntersecting && !this.animatedElements.has(entry.target)){this.animateElement(entry.target);this.animatedElements.add(entry.target);}});},observerOptions);const scrollRevealElements = document.querySelectorAll('.scroll-reveal,.scroll-reveal-up,.scroll-reveal-down,' + '.scroll-reveal-left,.scroll-reveal-right,.scroll-reveal-scale');scrollRevealElements.forEach(element =>{observer.observe(element);});this.observers.push(observer);}animateElement(element){element.classList.add('revealed');const staggerChildren = element.querySelectorAll('[class*="stagger-"]');if(staggerChildren.length > 0){staggerChildren.forEach((child,index)=>{setTimeout(()=>{child.classList.add('revealed');},index * 100);});}}setupSkillBarAnimations(){const skillsSection = document.querySelector('#skills');if(!skillsSection)return;const observerOptions ={threshold:0.3};const observer = new IntersectionObserver((entries)=>{entries.forEach(entry =>{if(entry.isIntersecting && !this.skillBarsAnimated){this.animateSkillBars();this.skillBarsAnimated = true;}});},observerOptions);observer.observe(skillsSection);this.observers.push(observer);}setupTimelineAnimations(){const timelineItems = document.querySelectorAll('.timeline-item');if(timelineItems.length === 0)return;const observerOptions ={threshold:0.15,rootMargin:'0px 0px -80px 0px'};const observer = new IntersectionObserver((entries)=>{entries.forEach(entry =>{if(entry.isIntersecting && !entry.target.classList.contains('animate-in')){entry.target.classList.add('animate-in');entry.target.classList.add('revealed');this.animateTimelineMarker(entry.target);}});},observerOptions);timelineItems.forEach(item =>{observer.observe(item);});this.observers.push(observer);this.setupTimelineLineAnimation();}animateTimelineMarker(timelineItem){const marker = timelineItem.querySelector('.timeline-marker');if(marker){marker.style.boxShadow = '0 0 0 4px var(--background-color),0 0 0 8px var(--primary-color),0 0 30px rgba(100,255,218,0.8)';setTimeout(()=>{marker.style.boxShadow = '';},800);}}setupTimelineLineAnimation(){const timeline = document.querySelector('.timeline');if(!timeline)return;const animatedLine = document.createElement('div');animatedLine.classList.add('timeline-line-animated');animatedLine.style.cssText = ` position:absolute;left:50%;top:0;width:2px;height:0;background:linear-gradient(to bottom,var(--primary-color),var(--secondary-color));transform:translateX(-50%);transition:height 0.3s ease-out;z-index:1;`;timeline.style.position = 'relative';timeline.insertBefore(animatedLine,timeline.firstChild);const updateLineHeight = this.throttle(()=>{const timelineRect = timeline.getBoundingClientRect();const windowHeight = window.innerHeight;if(timelineRect.top < windowHeight && timelineRect.bottom > 0){const visibleHeight = Math.min(windowHeight - Math.max(timelineRect.top,0),timelineRect.height);const percentage =(visibleHeight / timelineRect.height)* 100;animatedLine.style.height = Math.min(percentage,100)+ '%';}},10);window.addEventListener('scroll',updateLineHeight);updateLineHeight();}animateSkillBars(){const skillBars = document.querySelectorAll('.skill-progress');skillBars.forEach((bar,index)=>{const targetWidth = bar.style.width;bar.style.width = '0%';setTimeout(()=>{bar.style.transition = 'width 1.5s ease-out';bar.style.width = targetWidth;},index * 100);});}setupHoverEffects(){const cards = document.querySelectorAll('.project-card,.skill-card');cards.forEach(card =>{if(!card.classList.contains('hover-lift')){card.classList.add('hover-lift');}});const buttons = document.querySelectorAll('.btn');buttons.forEach(button =>{if(!button.classList.contains('hover-grow')){button.classList.add('hover-grow');}});this.setupRippleEffect();this.setupCardElevation();this.setupSmoothScroll();this.setupLoadingStates();}setupRippleEffect(){const buttons = document.querySelectorAll('.btn,button');buttons.forEach(button =>{button.addEventListener('click',function(e){const ripple = document.createElement('span');ripple.classList.add('ripple-effect');const rect = this.getBoundingClientRect();const size = Math.max(rect.width,rect.height);const x = e.clientX - rect.left - size / 2;const y = e.clientY - rect.top - size / 2;ripple.style.width = ripple.style.height = size + 'px';ripple.style.left = x + 'px';ripple.style.top = y + 'px';this.style.position = 'relative';this.style.overflow = 'hidden';this.appendChild(ripple);setTimeout(()=>{ripple.remove();},600);});});}setupCardElevation(){const cards = document.querySelectorAll('.project-card,.skill-card,.about-details .detail,.contact-item');cards.forEach(card =>{card.addEventListener('mouseenter',function(){this.style.transform = 'translateY(-8px)';this.style.transition = 'transform 0.3s ease,box-shadow 0.3s ease';});card.addEventListener('mouseleave',function(){this.style.transform = 'translateY(0)';});});}setupSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(anchor =>{anchor.addEventListener('click',function(e){const targetId = this.getAttribute('href');if(targetId === '#')return;const targetElement = document.querySelector(targetId);if(targetElement){e.preventDefault();const headerOffset = 80;const elementPosition = targetElement.getBoundingClientRect().top;const offsetPosition = elementPosition + window.pageYOffset - headerOffset;window.scrollTo({top:offsetPosition,behavior:'smooth'});}});});}setupLoadingStates(){const contactForm = document.getElementById('contactForm');if(contactForm){contactForm.addEventListener('submit',function(e){const submitButton = this.querySelector('button[type="submit"]');if(submitButton && !submitButton.classList.contains('loading')){submitButton.classList.add('loading');submitButton.disabled = true;const originalText = submitButton.textContent;submitButton.innerHTML = '<span class="spinner"></span> Enviando...';setTimeout(()=>{submitButton.classList.remove('loading');submitButton.disabled = false;submitButton.textContent = originalText;},2000);}});}}debounce(func,wait){let timeout;return function executedFunction(...args){const later =()=>{clearTimeout(timeout);func(...args);};clearTimeout(timeout);timeout = setTimeout(later,wait);};}throttle(func,limit){let inThrottle;return function executedFunction(...args){if(!inThrottle){func.apply(this,args);inThrottle = true;setTimeout(()=> inThrottle = false,limit);}};}setupScrollProgress(){const progressBar = document.createElement('div');progressBar.classList.add('scroll-progress');document.body.appendChild(progressBar);const updateProgress = this.throttle(()=>{const windowHeight = window.innerHeight;const documentHeight = document.documentElement.scrollHeight;const scrollTop = window.pageYOffset || document.documentElement.scrollTop;const scrollPercent =(scrollTop /(documentHeight - windowHeight))* 100;progressBar.style.width = scrollPercent + '%';},10);window.addEventListener('scroll',updateProgress);updateProgress();}destroy(){this.observers.forEach(observer => observer.disconnect());this.observers = [];this.animatedElements.clear();const progressBar = document.querySelector('.scroll-progress');if(progressBar){progressBar.remove();}}}const animationController = new AnimationController();if(typeof module !== 'undefined' && module.exports){module.exports = AnimationController;}