class ThemeManager{constructor(){this.currentTheme = 'dark';this.storageKey = 'portfolio-theme-preference';this.metaThemeColor = document.querySelector('meta[name="theme-color"]');this.themeColors ={dark:'#0a192f',light:'#f8f9fa'};}init(){const savedTheme = this.getSavedTheme();if(savedTheme){this.currentTheme = savedTheme;}else{this.currentTheme = this.detectSystemTheme();}this.applyTheme(this.currentTheme);this.watchSystemTheme();return this.currentTheme;}detectSystemTheme(){if(window.matchMedia && window.matchMedia('(prefers-color-scheme:light)').matches){return 'light';}return 'dark';}watchSystemTheme(){if(window.matchMedia){const darkModeQuery = window.matchMedia('(prefers-color-scheme:dark)');if(darkModeQuery.addEventListener){darkModeQuery.addEventListener('change',(e)=>{if(!this.getSavedTheme()){const newTheme = e.matches ? 'dark':'light';this.applyTheme(newTheme);}});}else if(darkModeQuery.addListener){darkModeQuery.addListener((e)=>{if(!this.getSavedTheme()){const newTheme = e.matches ? 'dark':'light';this.applyTheme(newTheme);}});}}}toggleTheme(){const newTheme = this.currentTheme === 'dark' ? 'light':'dark';this.applyTheme(newTheme);this.saveTheme(newTheme);this.announceThemeChange(newTheme);return newTheme;}applyTheme(theme){this.currentTheme = theme;document.documentElement.setAttribute('data-theme',theme);if(this.metaThemeColor){this.metaThemeColor.setAttribute('content',this.themeColors[theme]);}window.dispatchEvent(new CustomEvent('themeChanged',{detail:{theme}}));}saveTheme(theme){try{localStorage.setItem(this.storageKey,theme);}catch(error){console.warn('Failed to save theme preference:',error);try{sessionStorage.setItem(this.storageKey,theme);}catch(sessionError){console.warn('Failed to save theme to sessionStorage:',sessionError);}}}getSavedTheme(){try{return localStorage.getItem(this.storageKey);}catch(error){console.warn('Failed to read theme preference:',error);try{return sessionStorage.getItem(this.storageKey);}catch(sessionError){return null;}}}getCurrentTheme(){return this.currentTheme;}announceThemeChange(theme){const themeNames ={light:'Light mode',dark:'Dark mode'};const announcement = document.createElement('div');announcement.setAttribute('role','status');announcement.setAttribute('aria-live','polite');announcement.className = 'sr-only';announcement.textContent = `Theme changed to ${themeNames[theme]}`;document.body.appendChild(announcement);setTimeout(()=> announcement.remove(),1000);}}const themeManager = new ThemeManager();if(typeof module !== 'undefined' && module.exports){module.exports = themeManager;}